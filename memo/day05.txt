day05

TCL(Trenasction Control Language) : DML을 위한 명령어
트랜잭션 제어 언어

트랜잭션 : 데니터베이스의 작업을 처리하는 논리적 연산 단위
	 [분리될 수 없는 최소 단위]
	 (어떠한 작업을 하기 위해 작성한 select, insert, update, delete구문)

트랜잭션의 특성

원자성(Atomicity) : 트랜잭션에 정의된 연산들은 모두 성공적으로
		실행되던지 아니면 전혀 실행되지 않은 상태로 남아야 한다.

일관성(Consistency) : 트랜색션 실행 전의 데이터베이스 내용이 잘못되지
		   않으면 트랜잭션 실행 후에도 데이터베이스의 내용이 잘못되면 안됨

고립성(Isolation) : 트랜잭션 실행 도중에 다른 트랜잭션의 영향을 받아
	           잘못된 결과를 만들면 안됨

영속성, 지속성(Durability) : 트랜잭션 실행이 성공적일 때, 그 트랜잭션이 갱신한 
			데이터베이스 내용은 영구적으로 저장됨.

- COMMIT : DML로 변경된 데이터를 데이터베이스에 적용할 때 사용

	INSERT, UPDATE, DELETE문 등을 사용한 후 변경한 작업을 데이터베이스에
	반영할 때 사용
	COMMIT문 사용시 이전 데이터는 영원히 지워짐
	COMMIT문 사용시 모든 사용자가 변경된 데이터 확인 가능

	SQLSERVER은 기본적으로 AUTO COMMIT모드이므로 자동으로
	COMMIT을 수행한다.
	(DML문이 성공하면 자동으로COMMIT을 싱행한다.)

	COMMIT 실행시 하나의 트랜잭션 과정을 종료
	-> COMMIT이 실행되기 전에 다른 사용자가 완료되지 않은 데이터를 보거나
	변경할 수 없다.

	사용법 : COMMIT;
	
- ROLLBACK : DML로 변경된 데이터를 변경 이전 상태로 되돌릴 때 사용

	데이터에 대한 변경사항 취소
	ROLLBACK문 사용시 이전 데이터 다시 저장
	- COMMIT되지 않은 상위 트랜잭션을 모두 ROLLBACK시킴

	ROLLBACK문 사용시 관련 행의 잠금(LOCKING)이 풀려 다른 사용자들이
	데이터 변경 가능

	SQL SERVER는 기본적으로AUTO COMMIT모드이므로 자동으로
	COMMIT을 하지만 오류가 발생하면 자동으로 ROLLBACK처리

	사용법 : ROLLBACK;

- SAVEPOINT : 오류 복구 처리에 효과적인 방법 
	-> 전체 트랜잭션을 ROLLBACK하지 한고도 오류 복귀 가능

	효과적으로 오류 복구 처리를 위해 저장점을 만들 때 사용
	-> 전체 트랜잭션을 ROLLBACK하지 않고 현시점에서SAVEPOINT
	까지 일부 트랜잭션만 오류 복귀 가능
	
	복잡한 대규모 트랜잭션에서 에러가 발생했을 떄 주로 사용
	복수의 저장점 정의 가능 
	
	저장점까지 롤백을 할 때는 ROLLVACK TO 저장점이름; 사용

	사용법 : SAVEPOINT 저장점명;
		ROLLBACK TO 저장점명;

	예) 10,000원이 등 계좌 A에서 0원이 든 계좌B로 돈 10,000원을 입금한다.

	-- QUERY1
	UPDATE 계좌
	SET 잔액  = 0
	WHERE 계좌번호 = A;

	-- QUERY2
	UPDATE 계좌
	SET 잔액 = 10,000
	WHERE 계좌번호 = B;

	취소 - ROLLBACK
	확정 - COMMIT

[별칭]

	AS(ALIAS) : 컬럼의 이름이 너무 길다면 별칭을 줘서 대신 사용할 수 있게 해주는 키워드

	SELECT절 : 컬럼명 작성후 한칸 띄우고 AS 띄우고 "별칭" 작성
	FROM 절 : 테이블명 뒤에 한칸 띄우고 "별칭"

[연결]
	
	두개 이상의 컬럼을 연결하여 하나의 컬럼처럼 보이게 만드는 것
	||
	예) 
	-- 누구누구의 별명은 무엇입니다.
	SELECT PLAYER_NAME || '의 별명은' || NICKNAME || '입니다.' "선수 별명" FROM PLAYER;

[유사검색]
	
	LIKE : 포함된 물자열의 값을 찾음, 문자의 개수도 제한을 줄 수 있다.
	- % : 모든 것	
	- _ :  하나의 값

	EX) 'M%' : M으로 시작하는 모든 값
	EX) '%M' : M으로 끝나는 모든 값
	EX) '%M%' : 값의 어디든 M을 포함하고 있는 모든 값 - 네이버 검색등에 많이 사용된다

	EX) 'M_' : M으로 시작하는 두글자 데이터 값 
	EX) '_M' : M으로 끝나는 두글자 데이터 값
	EX) '_M_' : 두번째 글자에 M이 들어있는 세들자 데이터 값


	

	 

